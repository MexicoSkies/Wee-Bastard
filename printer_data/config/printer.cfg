[include fluidd.cfg]

#[include runout.cfg]

[exclude_object]

[include stealthburner_leds.cfg]

[virtual_sdcard]
path: /home/biqu/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[include mainsail.cfg]
#####################################################################
## 	                MCU EBBCan
#####################################################################

[mcu EBBCan]
canbus_uuid: c4ff468a7b22   #CHANGE AND UNCOMMENT
#  The following command is used to view the ID of canbus and needs to be entered in the ssh terminal.
# “ ~/klippy-env/bin/python ~/klipper/scripts/canbus_query.py can0 ”

#--------------------------------------------------------------
[adxl345]
cs_pin: EBBCan:gpio1
spi_software_sclk_pin: EBBCan:gpio2
spi_software_mosi_pin: EBBCan:gpio0
spi_software_miso_pin: EBBCan:gpio3
axes_map: z,-y,x

[resonance_tester]
probe_points: 150, 150, 20
accel_chip: adxl345

#####################################################################
##	                cartographer (制图师)
#####################################################################

[cartographer]
canbus_uuid:fad33e46adc8 #UNCOMMENT

speed: 40.
#   Z probing dive speed.
lift_speed: 5.
#   Z probing lift speed.
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
x_offset: 0.
#   X offset of cartographer from the nozzle.
y_offset: 21.1
#   Y offset of cartographer from the nozzle.
trigger_distance: 2.
#   cartographer trigger distance for homing.
trigger_dive_threshold: 1.5
#   Threshold for range vs dive mode probing. Beyond `trigger_distance +
#   trigger_dive_threshold` a dive will be used.
trigger_hysteresis: 0.006
#   Hysteresis on trigger threshold for untriggering, as a percentage of the
#   trigger threshold.
cal_nozzle_z: 0.1
#   Expected nozzle offset after completing manual Z offset calibration.
cal_floor: 0.1
#   Minimum z bound on sensor response measurement.
cal_ceil:5.
#   Maximum z bound on sensor response measurement.
cal_speed: 1.0
#   Speed while measuring response curve.
cal_move_speed: 10.
#   Speed while moving to position for response curve measurement.
default_model_name: default
#   Name of default cartographer model to load.
mesh_main_direction: x
#   Primary travel direction during mesh measurement.
#mesh_overscan: -1
#   Distance to use for direction changes at mesh line ends. Omit this setting
#   and a default will be calculated from line spacing and available travel.
mesh_cluster_size: 1
#   Radius of mesh grid point clusters.
mesh_runs: 2
#   Number of passes to make during mesh scan.

#[lis2dw]
#cs_pin: cartographer:PA3
#spi_bus: spi1

#[resonance_tester]
#accel_chip: lis2dw
#probe_points:
#    150, 150, 20

[safe_z_home]
home_xy_position: 175,175
# Example home_xy_position: 175,175 - This would be for a 350 * 350mm bed. 
z_hop: 10

#####################################################################
## 	                MCU  Octopus
#####################################################################

[mcu]
# Query the ID of canbus：
# cd ~/CanBoot/scripts
# python3 flash_can.py -i can0 -q
canbus_uuid= 2f2c5c1225fa     
canbus_interface:can0
#####################################################################
##	                 Temperature Monitoring
#####################################################################
[temperature_sensor EBB_NTC]
sensor_type: Generic 3950
sensor_pin: EBBCan:gpio28
[temperature_sensor BTT-MCU]        
sensor_type: temperature_mcu
[temperature_sensor BTT-PI]
sensor_type: temperature_host

#####################################################################
##                     Input Shaper
#####################################################################
[input_shaper]
shaper_freq_x: 52
shaper_type_x: mzv
shaper_freq_y: 40.2
shaper_type_y: mzv

#####################################################################
##                     Model and acceleration
#####################################################################
[printer]
kinematics: corexy           # Printer type：corexy
max_velocity: 300            # Maximum speed (max. 300)
max_accel: 5000              # Maximum acceleration (max. 4000)
#max_accel_to_decel: 5000     # Maximum acceleration to deceleration (max. 4000) DEPRECIATED
max_z_velocity: 15           # Z-axis maximum speed
max_z_accel: 350             # Z-axis maximum acceleration
square_corner_velocity: 5.0  # Square corner speed

#####################################################################
#   B(X) ---------A(Y)
#   |                |
#   |--------E-------|
#   |                |
#   |                |
#   |                |
#####################################################################
##                   X-axis on MOTOR_0(B Motor)
#####################################################################

[stepper_x]
step_pin: PF13             # X-axis motor pulse pin setting
dir_pin: PF12              # X-axis motor direction pin setting
enable_pin: !PF14          # X-axis motor enable pin setting
microsteps: 32             # Motor microsteps Setting
rotation_distance: 40      # Active pulley circumference mm (2GT-20T pulley 40, 2GT-16T pulley 32)
full_steps_per_rotation:200   # Number of pulses required for a single motor revolution (1.8 degree motor: 200, 0.9 degree motor: 400)
endstop_pin: EBBCan:gpio24 #PG6           # Limit switch PIN pin setting（X-）
position_min: 0            # X-axis minimum travel - software limit
position_endstop: 350  #350    ## Mechanical reset point coordinates for X-axis (change to 350 for 350 models)
position_max: 350  #350       ## X-axis maximum travel - software limit (change to 350 for 350 models)
homing_speed: 100           # Reset speed maximum 100
homing_retract_dist: 5     # Setback distance after the first trigger of the reset switch
homing_positive_dir: true  # Direction of reset (generally no change required)

[tmc2240 stepper_x]
cs_pin: PC4
spi_software_sclk_pin: PA5
spi_software_mosi_pin: PA7
spi_software_miso_pin: PA6
driver_TPFD: 0
run_current: 0.85

#####################################################################
##                   Y-axis on MOTOR_1(A Motor)
#####################################################################

[stepper_y]
step_pin: PG0              # Y-axis motor pulse pin setting
dir_pin: PG1               # Y-axis motor direction pin setting
enable_pin: !PF15          # Y-axis motor enable pin setting
microsteps: 32             # Motor microsteps Setting
rotation_distance: 40      # Active pulley circumference mm (2GT-20T pulley 40, 2GT-16T pulley 32)
full_steps_per_rotation:200   # Number of pulses required for a single motor revolution (1.8 degree motor: 200, 0.9 degree motor: 400)
endstop_pin: PG9           # Limit switch PIN pin setting（Y-）
position_min: 0            # X-axis minimum travel - software limit
position_endstop: 350  #350      # Mechanical reset point coordinates for Y-axis (change to 350 for 350 models)
position_max: 350  #350          # Y-axis maximum travel - software limit (change to 350 for 350 models)
homing_speed: 100           # Reset speed maximum 100
homing_retract_dist: 5     # Setback distance after the first trigger of the reset switch
homing_positive_dir: true  # Direction of reset (generally no change required)

[tmc2240 stepper_y]
cs_pin: PD11
spi_software_sclk_pin: PA5
spi_software_mosi_pin: PA7
spi_software_miso_pin: PA6
driver_TPFD: 0
run_current: 0.85

####################################################################################
#   z1 -------------- z2
#   |                 |
#   |                 |
#   |                 |
#   |                 |
#  z0---   display ---z3
#####################################################################
##                  Z0-axis
#####################################################################
##		Z0-axis on MOTOR2_1(left front)
[stepper_z]
step_pin: PF11    		   # Z-axis motor pulse pin
dir_pin: PG3               # Z-axis motor direction pin setting
enable_pin: !PG5           # Z-axis motor enable pin setting
rotation_distance: 40      # Active pulley circumference mm (2GT-20T pulley 40, 2GT-16T pulley 32)
gear_ratio: 80:16          # reduction ratio
microsteps: 16             # microsteps
endstop_pin: probe:z_virtual_endstop #PG10          # Limit switch interface
##  position_endstop is the distance of the Z limit pin trigger point from the print surface.
##  Positive value = above the termination point of the platform，
##  Negative value = termination point below the plateau.
##  Increasing the value of position_ endstop will bring the nozzle closer to the bed.
##  After running Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the end of the CFG configuration.
##position_endstop: 0.5      # Modified as per actual
position_max: 280   #340       # Maximum Z-axis print height   350mm=340
position_min: -5           # Soft Limit Minimum Stroke
homing_speed: 10           # Reset speed - maximum 20
second_homing_speed: 3     # Secondary reset speed - maximum 10
homing_retract_dist: 0     # Retreat distance
#--------------------------------------------------------------------
[tmc2209 stepper_z]        # TMC2209
uart_pin: PC6              # drive communications port
interpolate: true          # Whether to enable 256 microstep interpolation
run_current: 0.8           # Motor running current value(mA)
hold_current: 0.8          # holding current(mA)
sense_resistor: 0.110      # Do not change the drive sampling resistor
stealthchop_threshold: 200 # Mute threshold

#--------------------------------------------------------------------#
##		Z1-axis on MOTOR3(left rear)
[stepper_z1]
step_pin: !PG4              # Z1-axis motor pulse pin
dir_pin: !PC1              # Z1-axis motor direction pin setting
enable_pin: !PA0           # Z1-axis motor enable pin setting
rotation_distance: 40      # Active pulley circumference mm (2GT-20T pulley 40, 2GT-16T pulley 32)
gear_ratio: 80:16          # reduction ratio
microsteps: 16             # microsteps
#--------------------------------------------------------------------
[tmc2209 stepper_z1]       # TMC2209
uart_pin: PC7              # drive communications port
interpolate: true          # Whether to enable 256 microstep interpolation
run_current: 0.8           # Motor running current value(mA)
hold_current: 0.8          # holding current(mA)
sense_resistor: 0.110      # Do not change the drive sampling resistor
stealthchop_threshold: 200 # Mute threshold

#--------------------------------------------------------------------#
##		Z2-axis on MOTOR4(right-rear)
[stepper_z2]
step_pin: PF9              # Z2-axis motor pulse pin
dir_pin: PF10              # Z2-axis motor direction pin setting
enable_pin: !PG2           # Z2-axis motor enable pin setting
rotation_distance: 40      # Active pulley circumference mm (2GT-20T pulley 40, 2GT-16T pulley 32)
gear_ratio: 80:16          # reduction ratio
microsteps: 16             # microsteps
#--------------------------------------------------------------------
[tmc2209 stepper_z2]       # TMC2209
uart_pin: PF2              # drive communications port
interpolate: true          # Whether to enable 256 microstep interpolation
run_current: 0.8           # Motor running current value(mA)
hold_current: 0.8          # holding current(mA)
sense_resistor: 0.110      # Do not change the drive sampling resistor
stealthchop_threshold: 200 # Mute threshold

#--------------------------------------------------------------------#
##		Z3-axis on MOTOR5(right-front)
[stepper_z3]
step_pin: PC13             # Z3-axis motor pulse pin
dir_pin: !PF0              # Z3-axis motor direction pin setting
enable_pin: !PF1           # Z3-axis motor enable pin setting
rotation_distance: 40      # Active pulley circumference mm (2GT-20T pulley 40, 2GT-16T pulley 32)
gear_ratio: 80:16          # reduction ratio
microsteps: 16             # microsteps
#--------------------------------------------------------------------
[tmc2209 stepper_z3]       # TMC2209
uart_pin: PE4              # drive communications port
interpolate: true          # Whether to enable 256 microstep interpolation
run_current: 0.8           # Motor running current value(mA)
hold_current: 0.8          # holding current(mA)
sense_resistor: 0.110      # Do not change the drive sampling resistor
stealthchop_threshold: 200 # Mute threshold

#####################################################################
##                  Extruder motor
#####################################################################

[extruder]
step_pin: EBBCan:gpio18
dir_pin: EBBCan:gpio19
enable_pin: !EBBCan:gpio17
full_steps_per_rotation: 200  # Number of pulses required for a single motor revolution (1.8 degree motor: 200, 0.9 degree motor: 400)
microsteps: 16
gear_ratio: 9:1   #50:10
rotation_distance: 47.371          #21.525
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBBCan:gpio7
sensor_type: EPCOS 100K B57560G104F    
sensor_pin: PF4   #EBBCan:gpio27
#control: pid
#pid_Kp: 21.527
#pid_Ki: 1.063
#pid_Kd: 108.982
min_temp: 0
max_temp: 300
min_extrude_temp: 100                 # Minimum extrusion temperature
pressure_advance: 0.05                # Propulsion pressure - try to keep pressure below 1.0
pressure_advance_smooth_time: 0.040   # Smooth advance time - default value is 0.040
##Nozzle Temperature PID Calibration Command:  "PID_CALIBRATE HEATER=extruder TARGET=245"
max_extrude_only_distance: 101.0

#sensor_type: EPCOS 100K B57560G104F   #ATC Semitec 104GT-2   #MAX31865
#sensor_pin: PF4   #EBBCan:gpio9
#spi_software_sclk_pin: EBBCan:gpio10
#spi_software_mosi_pin: EBBCan:gpio8
#spi_software_miso_pin: EBBCan:gpio11
#rtd_nominal_r: 100
#rtd_reference_r: 430
#rtd_num_of_wires: 2

[tmc2209 extruder]
uart_pin: EBBCan:gpio20
run_current: 0.550
stealthchop_threshold: 999999

#--------------------------------------------------------------------
[verify_heater extruder]   # Heating Block Temperature Tolerance Configuration
max_error: 120             # maximum error
check_gain_time:120        # tolerance time
hysteresis: 50             # tolerance temperature
heating_gain: 2            # Heating Gain


#####################################################################
##                  Filament Inspection
#####################################################################

#[filament_switch_sensor DLJC]
#pause_on_runout: True
## When set to True, a pause will be executed immediately after a material break
## , if False, a material break pause will not be enabled

#runout_gcode:PAUSE
## G-code to be executed after a material break

#insert_gcode:RESUME
## G-code to be executed after insertion of consumables

#event_delay: 3.0
## Minimum time delay between events, in 3 seconds

#pause_delay: 0.5
## Delay between pause commands, scheduling and executing runout_gcode in seconds. 
## Increase this delay if strange pause behaviour occurs. The default is 0.5 seconds.

#switch_pin:PG15
## Set the pin, this parameter must be filled

#--------------------------------------------------------------------
#[filament_switch_sensor material_0]
#switch_pin: PG12

#[filament_switch_sensor material_1]
#switch_pin: PG13

#[filament_switch_sensor material_2]
#switch_pin: PG14
#--------------------------------------------------------------------

#####################################################################
##                  Heater_bed
#####################################################################

[heater_bed]
heater_pin: PA3              # (BE0)
sensor_pin: PF3              # sensor interface(TB)
sensor_type: ATC Semitec 104GT-2	 #ATC Semitec 104GT-2
control: pid                 ##heater_bed Temperature PID Calibration Command:  "PID_CALIBRATE HEATER=heater_bed TARGET=100"
pid_kp: 58.437
pid_ki: 2.347
pid_kd: 363.769
min_temp: 0
max_temp: 120
max_power: .90  #1.0

#[heater_generic Heater_Filament_Box]
#heater_pin: PB11              # (BE0)
#sensor_pin: PF7              # sensor interface(TB)
#sensor_type: NTC 100K MGB18-104F39050L32	 
#control: pid                 ##heater_bed Temperature PID Calibration Command:  "PID_CALIBRATE HEATER=heater_bed TARGET=100"
#pid_kp: 58.437
#pid_ki: 2.347
#pid_kd: 363.769
#min_temp: 0
#max_temp: 90
#max_power: .90  #1.0

	
#####################################################################
# 	                   Bed Grid Calibration
#####################################################################

[bed_mesh]
speed: 400                    # Calibration speed
horizontal_move_z: 10        # Z-axis movement speed
mesh_min: 30,30              # Minimum calibration point coordinates x, y
mesh_max: 320,320           # Maximum calibration point coordinates x, y ORIG - 250,250
probe_count: 40,40             # Number of sampling points (7X7 is 49 points)
mesh_pps: 2,2                # Number of supplementary sampling points
algorithm: bicubic           # algorithmic model
bicubic_tension: 0.2         # Algorithmic interpolation don't move

#####################################################################
#                  FAN
#####################################################################
[fan]
pin: EBBCan:gpio13
kick_start_time: 0.5
off_below: 0.10

[heater_fan hotend_fan]
pin: EBBCan:gpio14
heater: extruder
heater_temp: 50.0

#[fan_generic 4W_FAN0]
#pin: EBBCan:gpio15
#tachometer_pin: EBBCan:gpio12
#tachometer_ppr: 1

[heater_fan Nevermore]
pin: PA8
max_power: 1.0
shutdown_speed: 1.0
kick_start_time: 5.0
heater: extruder
heater_temp: 200
fan_speed: 1.0

#--------------------------------------------------------------------
[heater_fan basement_fan]  # Skirt fan 1
pin: PE5                    # FAN-2
shutdown_speed: 0.0          # Closing speed (Please do not change)
kick_start_time: 0.5         # start-up time (Please do not change)
heater: heater_bed           # Related equipment: heater_bed
heater_temp: 20              # How many degrees does the heat bed reach to activate the fan
fan_speed: 0.5               # Fan speed
#--------------------------------------------------------------------
[heater_fan basement_fan2] # Skirt fan 2
pin: PD12                    # FAN-3
shutdown_speed: 0.0          # Closing speed (Please do not change)
kick_start_time: 0.5          # start-up time (Please do not change)
#sensor_type: temperature_host
#sensor_host: host
heater: heater_bed           # Related equipment: heater_bed
heater_temp: 20 #50             # How many degrees does the heat bed reach to activate the fan
fan_speed: 0.5               # Fan speed
#--------------------------------------------------------------------
#[heater_fan exhaust_fan]     # exhaust_fan
#pin: PD13                    # FAN-4
#shutdown_speed: 0.0          # Closing speed (Please do not change)
#kick_start_time: 5.0         # start-up time (Please do not change)
#heater: heater_bed           # Related equipment: heater_bed
#heater_temp: 60              # How many degrees does the heat bed reach to activate the fan
#fan_speed: 1.0               # Fan speed
#--------------------------------------------------------------------
#[heater_fan hotend_fan]      # Hotend Fan
#pin: PD14                     # FAN-0
#max_power: 1.0               # Maximum speed
#kick_start_time: 0.5         # start-up time (Please do not change)
#heater: extruder             # Related equipment: extruder
#heater_temp: 50              # How many degrees does it reach to activate the fan
#fan_speed: 1.0               # Fan speed

#####################################################################
#                            RGB-LEDlight
#####################################################################

[neopixel hotend_rgb]
pin: EBBCan:gpio16
chain_count: 10              # Number of lamp beads
color_order: GRB             # colour sequence
initial_RED: 0.2             # Initial red brightness
initial_GREEN: 0.2           # Initial green brightness
initial_BLUE: 0.2            # Initial blue brightness

#[neopixel LEDlight]
#pin: PB10                     # signal interface
#chain_count: 26              # Number of lamp beads
#color_order: GRB             # colour sequence
#initial_RED: 0.2             # Initial red brightness
#initial_GREEN: 0.2           # Initial green brightness
#initial_BLUE: 0.2            # Initial blue brightness

#####################################################################
#                          Idle off hot bed
#####################################################################

[idle_timeout]
timeout: 18000                # The hot bed is switched off if the idle time exceeds 30 minutes

#####################################################################
#[bltouch]
#sensor_pin: ^EBBCan:gpio21
#control_pin: EBBCan:gpio22

####################################################################################
#	                         Gantry levelling 
####################################################################################
[quad_gantry_level]

 gantry_corners:
 	-60,-10
 	410,420
#  Probe points
points:
  40,40
 	40,300
 	310,300
 	310,40

#--------------------------------------------------------------------
speed: 200                          # Levelling speed
horizontal_move_z: 10               # Z-axis starting height
retries: 5                          # Number of out-of-tolerance retries
retry_tolerance: 0.01               # Sampling tolerance
max_adjust: 10                      # Maximum adjustment stroke for levelling



[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE8, EXP1_2=PE7,
    EXP1_3=PE9, EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,       # Slot in the socket on this side
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PB1, EXP2_4=PA4,
    EXP2_5=PB2, EXP2_6=PA7,         # Slot in the socket on this side
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=PC5

#--------------------------------------------------------------------


[gcode_macro PROBE_CALIBRATE]
gcode:
    CARTOGRAPHER_CALIBRATE

[gcode_macro G32]
gcode:
    BED_MESH_CLEAR               # Unloading net beds
    G28                            # Homing all axes
    QUAD_GANTRY_LEVEL            # Gantry levelling
    G28                            # Homing all axes
    #G0 X150 Y150 Z30 F3600         # 300mm
    G0 X175 Y175 Z30 F3600         # 350mm

#--------------------------------------------------------------------
[gcode_macro PAUSE]
description: Pause the actual running print
rename_existing: PAUSE_BASE
# change this if you need more or less extrusion
variable_extrude: 1.0
gcode:
  ##### read E from pause macro #####
  {% set E = printer["gcode_macro PAUSE"].extrude|float %}
  ##### set park positon for x and y #####
  # default is your max posion from your printer.cfg
  {% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
  {% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
  ##### calculate save lift position #####
  {% set max_z = printer.toolhead.axis_maximum.z|float %}
  {% set act_z = printer.toolhead.position.z|float %}
  {% if act_z < (max_z - 2.0) %}
      {% set z_safe = 2.0 %}
  {% else %}
      {% set z_safe = max_z - act_z %}
  {% endif %}
  ##### end of definitions #####
  PAUSE_BASE
  G91
  {% if printer.extruder.can_extrude|lower == 'true' %}
    G1 E-{E} F2100
  {% else %}
    {action_respond_info("Extruder not hot enough")}
  {% endif %}
  {% if "xyz" in printer.toolhead.homed_axes %}
    G1 Z{z_safe} F900
    G90
    G1 X{x_park} Y{y_park} F6000
  {% else %}
    {action_respond_info("Printer not homed")}
  {% endif %} 

[gcode_macro RESUME]
description: Resume the actual running print
rename_existing: RESUME_BASE
gcode:
  ##### read E from pause macro #####
  {% set E = printer["gcode_macro PAUSE"].extrude|float %}
  #### get VELOCITY parameter if specified ####
  {% if 'VELOCITY' in params|upper %}
    {% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
  {%else %}
    {% set get_params = "" %}
  {% endif %}
  ##### end of definitions #####
  {% if printer.extruder.can_extrude|lower == 'true' %}
    G91
    G1 E{E} F2100
  {% else %}
    {action_respond_info("Extruder not hot enough")}
  {% endif %}  
  RESUME_BASE {get_params}

#--------------------------------------------------------------------
[gcode_macro PRINT_START] 
#   Use PRINT_START for the slicer starting script - please customise for your slicer of choice
gcode:
# Parameters
    {% set BED_TEMP = params.BED|float %}
    {% set EXTRUDER_TEMP = params.EXTRUDER|float %}

    G90  
    G28 ; homing
    QUAD_GANTRY_LEVEL
    
    BED_MESH_CLEAR
    BED_MESH_CALIBRATE PROFILE=adaptive ADAPTIVE=1

    M190 S{BED_TEMP}            ; set and wait for bed to reach temp
    M109 S{EXTRUDER_TEMP}       ; set and wait for hot end to reach temp
    #BED_MESH_CLEAR                 # Unloading net beds
    #G28                              # Homing all axes
    #QUAD_GANTRY_LEVEL              # Gantry levelling
    #BED_MESH_PROFILE LOAD=default  # Loading the net bed
    #M109 S{ printer.extruder.target }       ##Restore print head temperature
    #G90
    G92 E0                           # Reset Extruder
    G1 Z2.0 F3000                    # Move Z Axis up
    G1 X10.1 Y20 Z0.28 F5000.0       # Move to start position
    G1 X10.1 Y200.0 Z0.28 F1500.0 E17 # Draw the first line
    G1 X10.4 Y200.0 Z0.28 F5000.0    # Move to side a little
    G1 X10.4 Y20 Z0.28 F1500.0 E32   # Draw the second line
    G92 E0                           # Reset Extruder
    G90
#--------------------------------------------------------------------
[gcode_macro PRINT_END]            # Set PRINT_END as the end-of-print macro to customise the after-print action.
gcode:
    M400                           
    G92 E0                         # Zeroing the extruder
    G1 E-10.0 F3600                # Retracting the filament
    G91                            # relative position
    G0 Z1.00 X20.0 Y20.0 F6000     # Remove nozzle
    TURN_OFF_HEATERS             # Close the hot end
    M107                           # Switch off the fan.
    G1 Z2 F3000                    # Move the nozzle up 2 mm
    G90                            # absolute positioning
    G0  X150 Y300 F3600            # Park the nozzle at the rear
    BED_MESH_CLEAR               # Unloading net beds

#--------------------------------------------------------------------
[gcode_macro CANCEL_PRINT]
description: Cancel the actual running print
rename_existing: CANCEL_PRINT_BASE
variable_park: True
gcode:
  ## Move head and retract only if not already in the pause state and park set to true
  {% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
    _TOOLHEAD_PARK_PAUSE_CANCEL
  {% endif %}
  TURN_OFF_HEATERS
  CANCEL_PRINT_BASE

#[gcode_macro M600]
#gcode:
#    PAUSE

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description: Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude: 1.0
gcode:
  ##### set park positon for x and y #####
  # default is your max posion from your printer.cfg
  {% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
  {% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
  {% set z_park_delta = 2.0 %}
  ##### calculate save lift position #####
  {% set max_z = printer.toolhead.axis_maximum.z|float %}
  {% set act_z = printer.toolhead.position.z|float %}
  {% if act_z < (max_z - z_park_delta) %}
    {% set z_safe = z_park_delta %}
  {% else %}
    {% set z_safe = max_z - act_z %}
  {% endif %}
  ##### end of definitions #####
  {% if printer.extruder.can_extrude|lower == 'true' %}
    M83
    G1 E-{extrude} F2100
    {% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
  {% else %}
    {action_respond_info("Extruder not hot enough")}
  {% endif %}
  {% if "xyz" in printer.toolhead.homed_axes %}
    G91
    G1 Z{z_safe} F900
    G90
    G1 X{x_park} Y{y_park} F6000
    {% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
  {% else %}
    {action_respond_info("Printer not homed")}
  {% endif %}

[gcode_macro HEAT_SOAK]
description: heats the bed for a while

variable_target_temp: 0
variable_stage: None ## heating -> soaking -> done -> None

## in seconds
variable_check_interval: 10
variable_soak_time_remaining: 0
variable_total_time_elapsed: 0

gcode:
    {% set TARGET = params.TARGET | default(0) | float %}
    {% set DURATION = (params.DURATION | default(5) | int) * 60 %} ## minutes to seconds

    SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=target_temp         VALUE={ TARGET }
    SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=stage               VALUE="'heating'"
    SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=soak_time_remaining VALUE={ DURATION }
    SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=total_time_elapsed  VALUE=0

    ;; fire up the heater
    SET_HEATER_TEMPERATURE HEATER=Heater_Filament_Box TARGET={ TARGET }

    ;; run the fan to circulate air
    _SET_FAN_SPEED PERCENT=50

    ;; put the bed and nozzle where they're a safe distance apart
    G28
    CENTER

    M84 ;; turn off steppers

    UPDATE_DELAYED_GCODE ID=heat_soaker DURATION={ check_interval }

[gcode_macro CANCEL_HEAT_SOAK]
description: cancels an in-progress HEAT_SOAK cycle
gcode:
    SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=stage VALUE="'cancel'"
    UPDATE_DELAYED_GCODE ID=heat_soaker DURATION=1

[delayed_gcode heat_soaker]
; ## debug
; { action_respond_info( printer['gcode_macro HEAT_SOAK'] | tojson )}
gcode:
    {% set heat_soak = printer['gcode_macro HEAT_SOAK'] %}

    ## update total time elapsed
    {% set total_time_elapsed = heat_soak.total_time_elapsed + heat_soak.check_interval %}
    SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=total_time_elapsed VALUE={ total_time_elapsed }

    {% set stage = heat_soak.stage %}
    {% if stage == "heating" and printer.Heater_Filament_Box.temperature >= heat_soak.target_temp %}
        {% set stage = "soaking" %}
    {% endif %}

    {% if stage == "soaking" %}
        ## update soak countdown
        {% set soak_time_remaining = [heat_soak.soak_time_remaining - heat_soak.check_interval, 0] | max %}
        SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=soak_time_remaining VALUE={ soak_time_remaining }

        {% if soak_time_remaining == 0 %}
            {% set stage = "done" %}
        {% endif %}
    {% endif %}

    SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=stage VALUE="'{ stage }'"

    {% if stage in ("done", "cancel") %}

        {% if stage == "cancel" %}
            {% set stage = "done" %}
            TURN_OFF_HEATERS
            M107 ; turn off fan

            M117 { "soak cancelled after ~%.1fm" | format(total_time_elapsed / 60.0) }
        {% else %}
            M117 { "soak complete after %.1fm" | format(total_time_elapsed / 60.0) }
        {% endif %}

        ## reset all state vars, except stage, which may be queried via the api
        SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=target_temp         VALUE=0
        SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=soak_time_remaining VALUE=0
        SET_GCODE_VARIABLE MACRO=HEAT_SOAK VARIABLE=total_time_elapsed  VALUE=0

    {% else %}

        {% if total_time_elapsed % 90 == 0 %}
            ## output status periodically
            {% if stage == "heating" %}
                M117 { "heating -- %.1fm elapsed" | format(total_time_elapsed / 60.0) }
            {% elif stage == "soaking" %}
                M117 { "soaking -- %.1fm remaining" | format(soak_time_remaining / 60.0) }
            {% endif %}
        {% endif %}

        ## trigger ourselves again
        UPDATE_DELAYED_GCODE ID=heat_soaker DURATION={ heat_soak.check_interval }

        ## dwell for 1ms to prevent from going idle
        G4 P1

    {% endif %}


############################################################################
                      #Chamber Dryer (Filament Dryer)
############################################################################

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [cartographer model default]
#*# model_coef = 1.370931878491855,
#*# 	  1.7841448372470592,
#*# 	  0.7684113809606741,
#*# 	  0.42831882336245247,
#*# 	  0.4103842871268555,
#*# 	  0.19748696728331908,
#*# 	  -0.3582856874524586,
#*# 	  -0.11837525887007858,
#*# 	  0.35770686884501207,
#*# 	  0.1589890956820654
#*# model_domain = 3.198562058168112e-07,3.3383418746061717e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 75.306303
#*# model_offset = -0.14000
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.219660, 0.200320, 0.192194
#*# 	0.180126, 0.159128, 0.153046
#*# 	0.148148, 0.125472, 0.125432
#*# x_count = 3
#*# y_count = 3
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 99.82
#*# max_x = 203.542
#*# min_y = 39.2457
#*# max_y = 87.3702
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 21.650
#*# pid_ki = 1.519
#*# pid_kd = 77.126
#*#
#*# [cartographer model 110-Bed_ASA]
#*# model_coef = 1.3461284785960164,
#*# 	1.7756016874347704,
#*# 	0.6921135560868378,
#*# 	0.23386707663292172,
#*# 	0.6637452537268347,
#*# 	0.9334650473318035,
#*# 	-0.650435584948203,
#*# 	-1.0956384249835946,
#*# 	0.4989979108228807,
#*# 	0.6046709663335881
#*# model_domain = 3.164889570441457e-07,3.3320003120445544e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 29.932875
#*# model_offset = 0.10500
#*#
#*# [bed_mesh adaptive]
#*# version = 1
#*# points =
#*# 	0.215440, 0.213941, 0.210373, 0.210813, 0.209810, 0.208843, 0.208474, 0.209356, 0.209522, 0.209827, 0.207490, 0.203716, 0.200508, 0.197661, 0.195275, 0.195127, 0.193302, 0.194417, 0.195166, 0.196268, 0.196622, 0.196100, 0.195144, 0.196057, 0.194894, 0.194791, 0.194060, 0.194022, 0.196581, 0.198864, 0.201329, 0.205314, 0.205275, 0.212479, 0.214164, 0.222695, 0.227061, 0.229677, 0.229446, 0.232495
#*# 	0.206674, 0.202007, 0.202483, 0.201444, 0.199250, 0.197627, 0.198813, 0.199391, 0.199768, 0.199335, 0.195335, 0.192256, 0.189597, 0.187277, 0.185598, 0.183291, 0.181512, 0.180324, 0.180510, 0.182321, 0.182455, 0.182493, 0.182075, 0.181884, 0.182058, 0.182002, 0.182749, 0.183114, 0.184032, 0.187384, 0.188647, 0.192297, 0.193881, 0.199789, 0.201714, 0.208433, 0.213293, 0.216916, 0.217600, 0.220193
#*# 	0.199426, 0.196154, 0.194080, 0.193818, 0.193021, 0.190579, 0.191405, 0.192072, 0.191466, 0.190660, 0.186943, 0.184840, 0.181905, 0.179314, 0.176721, 0.174041, 0.173226, 0.171697, 0.171364, 0.173444, 0.173881, 0.174640, 0.174370, 0.173811, 0.173092, 0.173384, 0.174939, 0.176459, 0.176290, 0.179070, 0.180665, 0.183380, 0.186340, 0.190872, 0.193236, 0.199200, 0.203281, 0.207001, 0.208430, 0.209498
#*# 	0.184902, 0.182270, 0.180462, 0.176959, 0.176033, 0.174503, 0.174491, 0.177006, 0.176897, 0.175780, 0.173198, 0.170973, 0.168633, 0.164554, 0.162018, 0.159967, 0.158466, 0.157212, 0.157696, 0.157085, 0.158381, 0.159803, 0.158404, 0.159432, 0.158352, 0.159651, 0.161670, 0.162150, 0.163461, 0.166241, 0.168747, 0.171363, 0.173253, 0.180595, 0.181348, 0.187971, 0.191455, 0.192048, 0.195888, 0.198284
#*# 	0.173452, 0.170100, 0.167834, 0.166613, 0.164523, 0.162995, 0.164057, 0.163595, 0.164182, 0.162903, 0.161387, 0.159156, 0.155368, 0.152550, 0.149504, 0.146636, 0.146407, 0.144979, 0.144822, 0.145954, 0.146486, 0.146267, 0.146379, 0.146793, 0.147282, 0.148097, 0.149682, 0.150900, 0.152441, 0.155472, 0.157616, 0.159920, 0.161302, 0.165648, 0.165577, 0.171619, 0.175907, 0.179073, 0.180933, 0.181989
#*# 	0.164431, 0.160518, 0.155015, 0.157250, 0.154742, 0.153044, 0.150584, 0.151013, 0.151635, 0.152368, 0.149488, 0.147921, 0.144980, 0.141682, 0.139114, 0.136386, 0.134593, 0.134183, 0.133813, 0.134766, 0.135474, 0.135974, 0.135605, 0.135169, 0.136477, 0.138467, 0.139937, 0.141327, 0.142705, 0.144992, 0.148105, 0.150701, 0.152351, 0.153970, 0.155374, 0.161228, 0.165692, 0.169603, 0.171830, 0.171480
#*# 	0.155468, 0.152369, 0.148950, 0.147239, 0.146501, 0.144568, 0.144074, 0.143833, 0.144886, 0.145019, 0.142723, 0.140396, 0.137125, 0.132317, 0.130343, 0.127709, 0.125500, 0.125499, 0.125257, 0.125457, 0.125551, 0.126977, 0.127037, 0.127730, 0.129573, 0.131469, 0.133361, 0.135872, 0.137919, 0.140411, 0.141186, 0.143617, 0.144692, 0.148741, 0.150969, 0.155604, 0.159156, 0.161291, 0.160677, 0.159896
#*# 	0.145715, 0.141888, 0.138144, 0.136206, 0.134852, 0.133025, 0.133205, 0.134706, 0.136051, 0.134166, 0.132422, 0.129960, 0.124731, 0.120952, 0.117987, 0.116324, 0.114656, 0.113609, 0.113189, 0.113471, 0.113438, 0.114847, 0.117084, 0.117970, 0.120950, 0.124012, 0.126649, 0.128107, 0.129056, 0.130693, 0.131090, 0.131555, 0.132861, 0.134527, 0.136715, 0.141995, 0.147851, 0.149095, 0.150131, 0.147984
#*# 	0.136564, 0.132853, 0.129380, 0.128227, 0.125702, 0.124983, 0.125339, 0.126274, 0.126784, 0.125885, 0.123960, 0.121021, 0.116378, 0.112164, 0.109589, 0.107417, 0.107124, 0.105925, 0.105773, 0.105731, 0.105731, 0.108046, 0.108809, 0.111483, 0.114268, 0.118051, 0.121146, 0.123941, 0.124192, 0.124425, 0.123269, 0.124977, 0.125166, 0.129123, 0.131515, 0.135779, 0.138909, 0.140231, 0.140129, 0.137522
#*# 	0.122289, 0.121733, 0.117193, 0.113323, 0.111757, 0.111504, 0.112381, 0.113691, 0.113692, 0.113881, 0.111769, 0.108849, 0.105780, 0.101213, 0.098179, 0.096422, 0.095105, 0.093978, 0.093530, 0.093469, 0.093540, 0.096396, 0.098090, 0.101392, 0.104375, 0.108353, 0.112092, 0.113590, 0.114983, 0.113601, 0.113443, 0.112004, 0.114010, 0.119067, 0.120205, 0.124462, 0.127612, 0.127743, 0.127207, 0.125542
#*# 	0.112075, 0.108630, 0.104957, 0.104375, 0.102797, 0.101206, 0.102631, 0.101980, 0.102648, 0.102646, 0.099709, 0.097342, 0.094419, 0.090717, 0.089163, 0.086166, 0.084538, 0.083380, 0.082920, 0.083757, 0.083628, 0.087102, 0.088964, 0.093119, 0.095438, 0.098155, 0.100752, 0.102728, 0.103538, 0.104004, 0.102900, 0.103990, 0.105619, 0.111118, 0.111143, 0.116555, 0.117809, 0.117079, 0.116463, 0.114243
#*# 	0.102204, 0.099319, 0.096630, 0.098077, 0.095457, 0.092735, 0.092820, 0.093146, 0.094264, 0.093956, 0.090856, 0.088736, 0.086032, 0.083392, 0.081879, 0.079362, 0.076679, 0.075703, 0.075001, 0.075588, 0.076957, 0.078907, 0.081420, 0.083595, 0.088073, 0.091303, 0.092750, 0.095631, 0.098350, 0.098557, 0.099830, 0.101392, 0.102673, 0.107373, 0.106607, 0.111206, 0.113658, 0.111907, 0.109563, 0.106182
#*# 	0.094634, 0.092196, 0.088244, 0.087267, 0.084817, 0.085837, 0.085116, 0.085852, 0.085797, 0.087275, 0.084311, 0.081960, 0.081177, 0.078835, 0.076430, 0.073715, 0.071359, 0.069039, 0.069635, 0.070439, 0.073526, 0.071981, 0.075313, 0.077012, 0.080083, 0.083396, 0.086920, 0.088948, 0.091019, 0.092053, 0.094394, 0.097315, 0.099111, 0.102608, 0.099482, 0.105797, 0.106580, 0.106174, 0.104255, 0.100866
#*# 	0.082868, 0.078952, 0.076796, 0.075633, 0.074625, 0.073530, 0.074408, 0.074852, 0.075179, 0.073538, 0.073304, 0.072761, 0.072004, 0.071181, 0.068268, 0.064023, 0.062476, 0.059316, 0.059609, 0.060794, 0.061292, 0.063405, 0.064216, 0.065376, 0.067077, 0.071733, 0.073462, 0.077877, 0.078201, 0.082776, 0.084797, 0.088335, 0.088928, 0.092330, 0.092130, 0.095902, 0.096622, 0.095127, 0.095069, 0.090737
#*# 	0.070580, 0.068811, 0.067375, 0.064066, 0.062830, 0.062353, 0.062257, 0.063353, 0.063787, 0.064385, 0.064132, 0.064548, 0.064941, 0.063278, 0.061222, 0.055150, 0.051780, 0.050136, 0.050265, 0.054636, 0.054175, 0.053667, 0.057956, 0.056263, 0.058294, 0.061057, 0.063484, 0.067348, 0.070089, 0.072748, 0.075471, 0.078635, 0.077629, 0.079816, 0.078245, 0.082623, 0.083251, 0.085574, 0.086262, 0.082838
#*# 	0.061341, 0.060906, 0.055320, 0.049126, 0.048580, 0.048243, 0.048542, 0.048578, 0.050183, 0.050643, 0.050129, 0.050215, 0.050210, 0.050210, 0.048435, 0.044744, 0.037901, 0.039950, 0.038583, 0.039126, 0.042420, 0.043748, 0.045403, 0.044522, 0.046990, 0.049370, 0.050118, 0.053972, 0.055601, 0.059373, 0.061281, 0.064111, 0.065827, 0.068593, 0.068336, 0.071462, 0.073111, 0.073171, 0.074127, 0.071783
#*# 	0.055403, 0.048679, 0.049131, 0.048652, 0.048530, 0.047057, 0.047039, 0.046866, 0.048129, 0.048630, 0.048518, 0.044296, 0.043628, 0.041921, 0.039982, 0.036504, 0.033458, 0.029456, 0.035833, 0.035317, 0.034686, 0.035919, 0.036315, 0.037579, 0.037592, 0.038779, 0.040396, 0.042041, 0.045423, 0.049948, 0.054829, 0.057230, 0.057240, 0.059730, 0.059232, 0.062704, 0.066023, 0.063982, 0.065053, 0.064255
#*# 	0.056458, 0.048178, 0.045289, 0.048732, 0.048544, 0.047052, 0.045481, 0.046430, 0.047039, 0.043122, 0.042293, 0.039993, 0.038307, 0.036433, 0.031241, 0.028094, 0.025001, 0.023391, 0.029024, 0.032849, 0.028886, 0.032955, 0.034933, 0.032932, 0.032937, 0.034549, 0.036186, 0.038268, 0.041011, 0.044138, 0.047924, 0.050179, 0.050209, 0.051764, 0.050802, 0.054946, 0.057809, 0.059553, 0.059647, 0.058564
#*# 	0.050043, 0.049407, 0.043814, 0.041042, 0.039800, 0.039787, 0.038633, 0.039092, 0.038813, 0.039034, 0.037114, 0.035160, 0.031298, 0.028154, 0.026252, 0.024947, 0.020882, 0.021687, 0.024744, 0.031270, 0.026641, 0.030639, 0.031168, 0.029162, 0.028425, 0.028773, 0.032887, 0.035255, 0.037817, 0.040090, 0.044279, 0.047045, 0.047040, 0.048640, 0.047572, 0.049242, 0.053290, 0.056444, 0.054969, 0.054809
#*# 	0.044028, 0.041324, 0.036985, 0.036207, 0.035207, 0.033747, 0.034171, 0.034524, 0.035006, 0.034830, 0.036551, 0.034490, 0.029821, 0.026579, 0.025008, 0.023766, 0.020718, 0.021784, 0.023444, 0.023606, 0.021965, 0.023360, 0.025404, 0.022639, 0.022488, 0.021884, 0.023491, 0.025944, 0.028499, 0.031367, 0.033742, 0.035364, 0.036150, 0.038908, 0.038458, 0.042370, 0.046508, 0.049789, 0.051098, 0.050228
#*# 	0.036450, 0.037623, 0.039215, 0.028063, 0.027904, 0.027615, 0.028013, 0.031865, 0.032769, 0.032086, 0.031316, 0.028549, 0.024204, 0.020376, 0.021884, 0.020956, 0.020440, 0.020206, 0.022109, 0.018524, 0.021790, 0.020186, 0.023072, 0.020207, 0.020194, 0.020670, 0.021418, 0.023106, 0.025760, 0.028871, 0.029834, 0.032028, 0.031755, 0.035298, 0.032474, 0.036764, 0.040746, 0.047113, 0.051764, 0.048628
#*# 	0.038658, 0.039859, 0.032060, 0.022994, 0.023159, 0.022589, 0.023344, 0.023387, 0.024901, 0.024700, 0.021783, 0.021286, 0.021281, 0.017392, 0.016008, 0.014605, 0.014370, 0.016098, 0.017818, 0.013732, 0.015069, 0.014613, 0.015118, 0.018249, 0.018569, 0.018102, 0.020186, 0.020107, 0.022110, 0.024969, 0.026503, 0.027412, 0.027739, 0.029907, 0.031118, 0.037205, 0.040216, 0.044046, 0.046690, 0.046737
#*# 	0.042044, 0.034364, 0.036799, 0.036152, 0.036016, 0.036052, 0.037251, 0.036063, 0.038338, 0.036425, 0.034124, 0.029648, 0.026561, 0.018657, 0.017345, 0.016285, 0.016627, 0.017564, 0.017432, 0.015533, 0.014899, 0.015407, 0.016142, 0.012269, 0.013656, 0.014625, 0.015468, 0.018237, 0.018517, 0.021890, 0.023293, 0.025571, 0.025194, 0.031355, 0.032100, 0.037994, 0.047058, 0.043528, 0.048653, 0.050587
#*# 	0.051880, 0.041731, 0.032845, 0.044087, 0.042288, 0.034515, 0.033813, 0.035306, 0.035115, 0.035207, 0.032705, 0.028217, 0.023613, 0.016914, 0.015194, 0.013938, 0.013993, 0.014976, 0.015281, 0.013880, 0.014675, 0.015376, 0.015495, 0.019197, 0.019784, 0.020572, 0.023092, 0.024759, 0.026626, 0.028799, 0.030123, 0.031365, 0.031118, 0.036142, 0.036046, 0.041343, 0.044969, 0.048134, 0.048579, 0.053392
#*# 	0.049471, 0.040844, 0.038198, 0.035735, 0.033512, 0.032505, 0.032790, 0.033488, 0.034010, 0.033287, 0.030692, 0.022589, 0.018479, 0.015256, 0.013356, 0.012230, 0.012338, 0.013911, 0.013724, 0.013878, 0.013888, 0.013724, 0.019483, 0.020055, 0.022095, 0.023005, 0.025245, 0.027372, 0.034469, 0.035337, 0.036155, 0.038448, 0.039153, 0.043750, 0.043882, 0.047483, 0.050342, 0.053255, 0.050018, 0.053141
#*# 	0.043765, 0.032847, 0.042584, 0.033972, 0.032500, 0.032874, 0.038936, 0.039252, 0.037749, 0.038062, 0.034496, 0.031338, 0.026605, 0.023394, 0.020190, 0.020175, 0.020281, 0.020218, 0.016218, 0.016587, 0.016938, 0.017846, 0.019403, 0.018151, 0.018688, 0.020790, 0.023409, 0.025720, 0.028123, 0.029731, 0.030448, 0.031320, 0.032842, 0.037600, 0.037918, 0.042170, 0.045437, 0.047833, 0.053298, 0.052416
#*# 	0.045753, 0.045492, 0.034348, 0.031028, 0.028266, 0.029694, 0.029371, 0.029299, 0.028182, 0.028002, 0.028970, 0.026166, 0.021383, 0.017629, 0.014811, 0.014441, 0.014223, 0.019064, 0.020201, 0.021789, 0.022175, 0.023596, 0.025024, 0.025002, 0.026524, 0.028253, 0.031374, 0.028109, 0.030275, 0.032111, 0.032919, 0.035208, 0.036295, 0.038180, 0.038535, 0.043300, 0.045932, 0.049431, 0.052046, 0.051009
#*# 	0.045391, 0.051965, 0.042865, 0.035630, 0.032717, 0.032775, 0.032056, 0.032452, 0.032437, 0.036632, 0.033480, 0.029986, 0.025386, 0.021014, 0.019613, 0.018738, 0.018524, 0.019320, 0.023585, 0.024989, 0.025096, 0.026953, 0.026631, 0.026420, 0.028046, 0.029459, 0.031454, 0.034362, 0.035951, 0.035408, 0.037472, 0.038155, 0.039404, 0.040902, 0.042290, 0.046421, 0.048591, 0.054278, 0.054179, 0.053277
#*# 	0.052802, 0.053300, 0.055105, 0.046973, 0.044268, 0.049419, 0.047768, 0.047076, 0.046145, 0.044053, 0.040918, 0.036757, 0.032862, 0.029987, 0.028218, 0.028023, 0.027329, 0.021940, 0.022619, 0.024198, 0.024994, 0.025949, 0.026553, 0.027531, 0.029684, 0.024804, 0.027726, 0.028210, 0.031140, 0.032892, 0.034567, 0.036052, 0.037650, 0.039217, 0.040397, 0.043818, 0.046848, 0.050167, 0.061423, 0.058576
#*# 	0.070440, 0.058326, 0.049807, 0.060339, 0.050060, 0.049578, 0.047402, 0.047778, 0.046535, 0.037622, 0.036027, 0.032756, 0.028074, 0.024989, 0.023392, 0.023293, 0.023350, 0.023196, 0.023393, 0.024935, 0.026465, 0.027862, 0.033402, 0.033932, 0.035449, 0.037950, 0.041195, 0.042490, 0.045081, 0.046365, 0.050267, 0.050789, 0.051876, 0.054688, 0.054815, 0.058760, 0.061134, 0.061665, 0.061129, 0.067860
#*# 	0.065861, 0.051521, 0.053183, 0.055146, 0.052623, 0.046696, 0.044727, 0.043214, 0.042331, 0.040814, 0.037706, 0.035044, 0.031167, 0.027723, 0.020332, 0.020208, 0.020162, 0.020016, 0.019418, 0.020259, 0.021374, 0.023368, 0.024604, 0.026417, 0.028192, 0.031248, 0.041473, 0.044742, 0.046387, 0.048490, 0.056527, 0.058399, 0.060084, 0.061203, 0.062501, 0.064379, 0.067277, 0.063457, 0.061918, 0.070813
#*# 	0.060909, 0.048603, 0.059752, 0.050589, 0.054176, 0.051827, 0.050793, 0.050242, 0.048776, 0.047235, 0.043976, 0.041516, 0.037701, 0.035911, 0.031783, 0.027131, 0.027796, 0.027596, 0.027422, 0.028934, 0.025049, 0.026808, 0.029017, 0.031206, 0.034430, 0.036402, 0.040889, 0.045408, 0.048530, 0.048802, 0.050364, 0.051853, 0.054799, 0.056996, 0.058254, 0.061124, 0.062863, 0.062659, 0.071740, 0.072169
#*# 	0.066074, 0.066631, 0.054984, 0.051406, 0.047224, 0.046217, 0.043756, 0.042743, 0.043019, 0.042195, 0.038117, 0.036848, 0.033053, 0.035963, 0.034366, 0.033874, 0.033698, 0.032860, 0.038022, 0.040174, 0.040699, 0.042310, 0.043956, 0.047045, 0.049814, 0.054172, 0.057971, 0.061145, 0.064255, 0.065780, 0.067383, 0.063327, 0.064225, 0.064191, 0.065109, 0.068393, 0.070557, 0.074315, 0.076250, 0.075071
#*# 	0.065067, 0.072596, 0.063395, 0.054417, 0.051797, 0.050215, 0.050212, 0.048650, 0.053448, 0.051690, 0.050073, 0.046562, 0.043909, 0.042431, 0.041542, 0.046240, 0.044029, 0.043395, 0.043015, 0.042461, 0.044327, 0.045507, 0.047430, 0.050119, 0.053990, 0.057988, 0.062002, 0.065697, 0.066432, 0.068457, 0.069632, 0.071170, 0.072783, 0.072001, 0.073355, 0.075048, 0.079696, 0.083560, 0.085203, 0.084395
#*# 	0.075749, 0.073492, 0.072161, 0.061305, 0.062020, 0.064891, 0.065024, 0.062752, 0.061615, 0.059555, 0.057969, 0.054814, 0.051893, 0.051786, 0.050891, 0.051669, 0.051716, 0.050401, 0.050944, 0.046297, 0.047026, 0.048539, 0.050987, 0.053532, 0.057682, 0.056462, 0.060378, 0.063995, 0.065691, 0.067259, 0.068972, 0.069758, 0.071788, 0.071103, 0.075022, 0.078093, 0.081012, 0.085652, 0.096629, 0.093809
#*# 	0.089757, 0.080584, 0.071498, 0.079866, 0.076689, 0.070115, 0.068841, 0.063760, 0.064070, 0.061128, 0.058154, 0.057770, 0.054441, 0.053362, 0.052544, 0.052981, 0.053361, 0.051792, 0.052166, 0.053299, 0.054840, 0.056546, 0.060506, 0.063852, 0.067323, 0.071607, 0.075216, 0.079564, 0.081207, 0.082976, 0.084434, 0.085896, 0.087302, 0.087560, 0.090266, 0.092981, 0.096442, 0.100350, 0.102617, 0.107233
#*# 	0.095155, 0.087430, 0.086607, 0.084432, 0.081406, 0.081181, 0.081117, 0.079060, 0.076091, 0.074274, 0.072800, 0.069877, 0.068041, 0.062615, 0.061228, 0.062499, 0.061428, 0.061165, 0.060954, 0.062279, 0.062312, 0.064143, 0.066455, 0.068823, 0.071596, 0.076499, 0.079273, 0.082715, 0.085838, 0.093980, 0.101306, 0.104186, 0.104734, 0.105981, 0.108046, 0.112666, 0.115488, 0.115024, 0.116333, 0.123198
#*# 	0.102999, 0.095049, 0.098451, 0.097768, 0.093879, 0.092064, 0.090811, 0.089797, 0.089034, 0.087637, 0.085899, 0.082791, 0.079875, 0.078208, 0.077206, 0.076067, 0.075931, 0.075029, 0.076173, 0.076511, 0.077405, 0.079483, 0.081306, 0.084336, 0.087354, 0.090747, 0.095849, 0.099764, 0.103182, 0.105943, 0.109214, 0.111908, 0.113955, 0.114519, 0.116886, 0.121238, 0.125522, 0.129946, 0.133760, 0.135447
#*# 	0.117824, 0.114459, 0.111217, 0.108788, 0.107348, 0.105706, 0.104247, 0.101947, 0.101259, 0.099310, 0.096602, 0.095043, 0.092022, 0.089786, 0.088631, 0.090035, 0.088966, 0.089091, 0.091347, 0.093472, 0.093880, 0.095265, 0.097001, 0.099900, 0.102898, 0.107277, 0.110505, 0.115339, 0.119414, 0.122863, 0.126187, 0.128956, 0.132999, 0.133485, 0.137912, 0.137903, 0.142622, 0.150555, 0.150653, 0.153787
#*# 	0.136457, 0.134526, 0.132252, 0.129855, 0.127148, 0.125531, 0.125498, 0.122415, 0.120349, 0.117783, 0.115572, 0.112577, 0.109526, 0.108327, 0.107238, 0.106590, 0.107084, 0.105760, 0.104354, 0.105696, 0.105711, 0.105829, 0.107272, 0.109974, 0.111900, 0.114966, 0.119369, 0.123748, 0.134529, 0.137487, 0.140989, 0.144988, 0.148209, 0.149798, 0.154242, 0.158486, 0.162155, 0.165741, 0.170047, 0.173018
#*# x_count = 40
#*# y_count = 40
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 320.0
#*# min_y = 30.0
#*# max_y = 320.0
